лекция 20201205
# 11 IPv4
Network and Host Portions - необходимы, чтобы понять какая часть адреса - сеть, а какая - id хоста
![](./pictures/1.jpg)
   - там где единицы в маске - там сетевая часть
   - там где нули в маске - там маска узла

Количество адресов в сети = 2^n-2, из за того, что существуют ___особые адреса___:
   * ___Адрес сети___ - тот, у которого хостовая часть адреса все "0", но не факт что в десятичном виде это будет 0
   * ___Направленный широковещательный адрес___ - тот, у которого узловая часть - все "1", но не факт что в десятичном виде это будет 255

Хитрости для представления форматов масок - /24б /19 и т.п.

# Классовая адресация
Раньше, когда не было масок, использовались понятия классов сетей
   * 0     - класс А /8     0. - 127.
   * 10    - класс B /16  128. - 191.
   * 110   - класс С /24  192. - 224.
   * 1110  - класс D MC   224. - 239. 
   * 1111  - класс E reserved 240. - 255
   * 127.0.0.1 - loopback

договорились, что часть адресов будут частными (не маршрутизируемыми провайдерами)
   * 10.0.0.0    /8
   * 172.16.0.0  /12
   * 192.168.0.0 /16
   * 169.254.0.0 /16 - Автоматические APIPA адреса

Чтобы частные адреса выпустить в инет - спроектировали и начали использовать NAT.

Выдачей адресов занимается IANA, которая отдает блоки RIR-ам
![](./pictures/2.jpg)
блоки IPv4 уже в аренду у RIR - не получить, их нет

# BC DOMAIN
кадры, которые флудят всю сеть. Крупные BC домены - плохо, устройства тратят огромные ресурсы, чтобы кадры обработать.
Спастись от этого помогает маршрутизатор, которые разграничивает BC домены. Сети рекомендуется дробить: BC будет меньше и производительность увеличится. Но: каждый IF R - должен быть в своей подсети => сети надо "дробить".
Дробление - "увеличение" длины сетевой части маски: была /24, стала /25, количество хостов,
2^n-8 = 2^7-2=128-2 = 126 адреса в /25

![](./pictures/3.jpg)

Связующее звено IPv4 и Ethernet - ARP: ___ARP_request___/___ARP_reply___, ARP-кэш имеет срок жизни, и сам очищается.

